\documentclass{article}\usepackage[]{graphicx}\usepackage[]{xcolor}
% maxwidth is the original width if it is less than linewidth
% otherwise use linewidth (to make sure the graphics do not exceed the margin)
\makeatletter
\def\maxwidth{ %
  \ifdim\Gin@nat@width>\linewidth
    \linewidth
  \else
    \Gin@nat@width
  \fi
}
\makeatother

\definecolor{fgcolor}{rgb}{0.345, 0.345, 0.345}
\newcommand{\hlnum}[1]{\textcolor[rgb]{0.686,0.059,0.569}{#1}}%
\newcommand{\hlsng}[1]{\textcolor[rgb]{0.192,0.494,0.8}{#1}}%
\newcommand{\hlcom}[1]{\textcolor[rgb]{0.678,0.584,0.686}{\textit{#1}}}%
\newcommand{\hlopt}[1]{\textcolor[rgb]{0,0,0}{#1}}%
\newcommand{\hldef}[1]{\textcolor[rgb]{0.345,0.345,0.345}{#1}}%
\newcommand{\hlkwa}[1]{\textcolor[rgb]{0.161,0.373,0.58}{\textbf{#1}}}%
\newcommand{\hlkwb}[1]{\textcolor[rgb]{0.69,0.353,0.396}{#1}}%
\newcommand{\hlkwc}[1]{\textcolor[rgb]{0.333,0.667,0.333}{#1}}%
\newcommand{\hlkwd}[1]{\textcolor[rgb]{0.737,0.353,0.396}{\textbf{#1}}}%
\let\hlipl\hlkwb

\usepackage{framed}
\makeatletter
\newenvironment{kframe}{%
 \def\at@end@of@kframe{}%
 \ifinner\ifhmode%
  \def\at@end@of@kframe{\end{minipage}}%
  \begin{minipage}{\columnwidth}%
 \fi\fi%
 \def\FrameCommand##1{\hskip\@totalleftmargin \hskip-\fboxsep
 \colorbox{shadecolor}{##1}\hskip-\fboxsep
     % There is no \\@totalrightmargin, so:
     \hskip-\linewidth \hskip-\@totalleftmargin \hskip\columnwidth}%
 \MakeFramed {\advance\hsize-\width
   \@totalleftmargin\z@ \linewidth\hsize
   \@setminipage}}%
 {\par\unskip\endMakeFramed%
 \at@end@of@kframe}
\makeatother

\definecolor{shadecolor}{rgb}{.97, .97, .97}
\definecolor{messagecolor}{rgb}{0, 0, 0}
\definecolor{warningcolor}{rgb}{1, 0, 1}
\definecolor{errorcolor}{rgb}{1, 0, 0}
\newenvironment{knitrout}{}{} % an empty environment to be redefined in TeX

\usepackage{alltt}
\IfFileExists{upquote.sty}{\usepackage{upquote}}{}
\begin{document}

\begin{knitrout}
\definecolor{shadecolor}{rgb}{0.969, 0.969, 0.969}\color{fgcolor}\begin{kframe}
\begin{alltt}
\hlkwd{library}\hldef{(knitr)}
\hlkwd{library}\hldef{(diagram)}
\hlkwd{read_demo}\hldef{(}\hlsng{"flowchart"}\hldef{,} \hlkwc{package} \hldef{=} \hlsng{"diagram"}\hldef{,} \hlkwc{labels} \hldef{=} \hlsng{"demo-flowchart"}\hldef{)}
\end{alltt}
\end{kframe}
\end{knitrout}
\begin{knitrout}
\definecolor{shadecolor}{rgb}{0.969, 0.969, 0.969}\color{fgcolor}\begin{kframe}
\begin{alltt}
\hlcom{## Flowchart examples}
\hlkwd{par}\hldef{(}\hlkwc{ask} \hldef{=} \hlnum{TRUE}\hldef{)}

\hlcom{## MODELLING DIAGRAM}
\hldef{mar} \hlkwb{<-} \hlkwd{par}\hldef{(}\hlkwc{mar} \hldef{=} \hlkwd{c}\hldef{(}\hlnum{1}\hldef{,} \hlnum{1}\hldef{,} \hlnum{1}\hldef{,} \hlnum{1}\hldef{))}
\hlkwd{openplotmat}\hldef{(}\hlkwc{main} \hldef{=} \hlsng{"from Soetaert and herman, book in prep"}\hldef{,}
    \hlkwc{cex.main} \hldef{=} \hlnum{1}\hldef{)}
\hldef{elpos} \hlkwb{<-} \hlkwd{coordinates}\hldef{(}\hlkwd{c}\hldef{(}\hlnum{1}\hldef{,} \hlnum{1}\hldef{,} \hlnum{1}\hldef{,} \hlnum{1}\hldef{,} \hlnum{1}\hldef{,} \hlnum{1}\hldef{,} \hlnum{1}\hldef{,} \hlnum{1}\hldef{),} \hlkwc{mx} \hldef{=} \hlopt{-}\hlnum{0.1}\hldef{)}
\hlkwd{segmentarrow}\hldef{(elpos[}\hlnum{7}\hldef{, ], elpos[}\hlnum{2}\hldef{, ],} \hlkwc{arr.pos} \hldef{=} \hlnum{0.15}\hldef{,} \hlkwc{dd} \hldef{=} \hlnum{0.3}\hldef{,}
    \hlkwc{arr.side} \hldef{=} \hlnum{3}\hldef{,} \hlkwc{endhead} \hldef{=} \hlnum{TRUE}\hldef{)}
\hlkwd{segmentarrow}\hldef{(elpos[}\hlnum{7}\hldef{, ], elpos[}\hlnum{3}\hldef{, ],} \hlkwc{arr.pos} \hldef{=} \hlnum{0.15}\hldef{,} \hlkwc{dd} \hldef{=} \hlnum{0.3}\hldef{,}
    \hlkwc{arr.side} \hldef{=} \hlnum{3}\hldef{,} \hlkwc{endhead} \hldef{=} \hlnum{TRUE}\hldef{)}
\hlkwd{segmentarrow}\hldef{(elpos[}\hlnum{7}\hldef{, ], elpos[}\hlnum{4}\hldef{, ],} \hlkwc{arr.pos} \hldef{=} \hlnum{0.15}\hldef{,} \hlkwc{dd} \hldef{=} \hlnum{0.3}\hldef{,}
    \hlkwc{arr.side} \hldef{=} \hlnum{3}\hldef{,} \hlkwc{endhead} \hldef{=} \hlnum{TRUE}\hldef{)}

\hldef{pin} \hlkwb{<-} \hlkwd{par}\hldef{(}\hlsng{"pin"}\hldef{)}  \hlcom{# size of plotting region, inches}
\hldef{xx} \hlkwb{<-} \hlnum{0.2}
\hldef{yy} \hlkwb{<-} \hldef{xx} \hlopt{*} \hldef{pin[}\hlnum{1}\hldef{]}\hlopt{/}\hldef{pin[}\hlnum{2}\hldef{]} \hlopt{*} \hlnum{0.15}  \hlcom{# used to make circles round}

\hldef{sx} \hlkwb{<-} \hlkwd{rep}\hldef{(xx,} \hlnum{8}\hldef{)}
\hldef{sx[}\hlnum{7}\hldef{]} \hlkwb{<-} \hlnum{0.05}

\hldef{sy} \hlkwb{<-} \hlkwd{rep}\hldef{(yy,} \hlnum{8}\hldef{)}
\hldef{sy[}\hlnum{6}\hldef{]} \hlkwb{<-} \hldef{yy} \hlopt{*} \hlnum{1.5}
\hldef{sy[}\hlnum{7}\hldef{]} \hlkwb{<-} \hldef{sx[}\hlnum{7}\hldef{]} \hlopt{*} \hldef{pin[}\hlnum{1}\hldef{]}\hlopt{/}\hldef{pin[}\hlnum{2}\hldef{]}

\hlkwa{for} \hldef{(i} \hlkwa{in} \hlkwd{c}\hldef{(}\hlnum{1}\hlopt{:}\hlnum{7}\hldef{))} \hlkwd{straightarrow}\hldef{(}\hlkwc{to} \hldef{= elpos[i} \hlopt{+} \hlnum{1}\hldef{, ],} \hlkwc{from} \hldef{= elpos[i,}
    \hldef{],} \hlkwc{lwd} \hldef{=} \hlnum{2}\hldef{,} \hlkwc{arr.pos} \hldef{=} \hlnum{0.6}\hldef{,} \hlkwc{endhead} \hldef{=} \hlnum{TRUE}\hldef{)}
\hldef{lab} \hlkwb{<-} \hlkwd{c}\hldef{(}\hlsng{"Problem"}\hldef{,} \hlsng{"Conceptual model"}\hldef{,} \hlsng{"Mathematical model"}\hldef{,}
    \hlsng{"Parameterisation"}\hldef{,} \hlsng{"Mathematical solution"}\hldef{,} \hlsng{""}\hldef{,} \hlsng{"OK?"}\hldef{,} \hlsng{"Prediction, Analysis"}\hldef{)}

\hlkwa{for} \hldef{(i} \hlkwa{in} \hlkwd{c}\hldef{(}\hlnum{1}\hlopt{:}\hlnum{5}\hldef{,} \hlnum{8}\hldef{))} \hlkwd{textround}\hldef{(elpos[i, ], sx[i], sy[i],} \hlkwc{lab} \hldef{= lab[i])}

\hlkwd{textround}\hldef{(elpos[}\hlnum{6}\hldef{, ], xx, yy} \hlopt{*} \hlnum{1.5}\hldef{,} \hlkwc{lab} \hldef{=} \hlkwd{c}\hldef{(}\hlsng{"Calibration,sensitivity"}\hldef{,}
    \hlsng{"Verification,validation"}\hldef{))}
\hlkwd{textdiamond}\hldef{(elpos[}\hlnum{7}\hldef{, ], sx[}\hlnum{7}\hldef{], sy[}\hlnum{7}\hldef{],} \hlkwc{lab} \hldef{= lab[}\hlnum{7}\hldef{])}

\hlkwd{textplain}\hldef{(}\hlkwd{c}\hldef{(}\hlnum{0.7}\hldef{, elpos[}\hlnum{2}\hldef{,} \hlnum{2}\hldef{]), yy} \hlopt{*} \hlnum{2}\hldef{,} \hlkwc{lab} \hldef{=} \hlkwd{c}\hldef{(}\hlsng{"main components"}\hldef{,}
    \hlsng{"relationships"}\hldef{),} \hlkwc{font} \hldef{=} \hlnum{3}\hldef{,} \hlkwc{adj} \hldef{=} \hlkwd{c}\hldef{(}\hlnum{0}\hldef{,} \hlnum{0.5}\hldef{))}
\hlkwd{textplain}\hldef{(}\hlkwd{c}\hldef{(}\hlnum{0.7}\hldef{, elpos[}\hlnum{3}\hldef{,} \hlnum{2}\hldef{]), yy,} \hlsng{"general theory"}\hldef{,} \hlkwc{adj} \hldef{=} \hlkwd{c}\hldef{(}\hlnum{0}\hldef{,}
    \hlnum{0.5}\hldef{),} \hlkwc{font} \hldef{=} \hlnum{3}\hldef{)}
\hlkwd{textplain}\hldef{(}\hlkwd{c}\hldef{(}\hlnum{0.7}\hldef{, elpos[}\hlnum{4}\hldef{,} \hlnum{2}\hldef{]), yy} \hlopt{*} \hlnum{2}\hldef{,} \hlkwc{lab} \hldef{=} \hlkwd{c}\hldef{(}\hlsng{"literature"}\hldef{,}
    \hlsng{"measurements"}\hldef{),} \hlkwc{font} \hldef{=} \hlnum{3}\hldef{,} \hlkwc{adj} \hldef{=} \hlkwd{c}\hldef{(}\hlnum{0}\hldef{,} \hlnum{0.5}\hldef{))}
\hlkwd{textplain}\hldef{(}\hlkwd{c}\hldef{(}\hlnum{0.7}\hldef{, elpos[}\hlnum{6}\hldef{,} \hlnum{2}\hldef{]), yy} \hlopt{*} \hlnum{2}\hldef{,} \hlkwc{lab} \hldef{=} \hlkwd{c}\hldef{(}\hlsng{"field data"}\hldef{,}
    \hlsng{"lab measurements"}\hldef{),} \hlkwc{font} \hldef{=} \hlnum{3}\hldef{,} \hlkwc{adj} \hldef{=} \hlkwd{c}\hldef{(}\hlnum{0}\hldef{,} \hlnum{0.5}\hldef{))}
\end{alltt}
\end{kframe}
\includegraphics[width=\maxwidth]{figure/051-flowchart-demo-flowchart-1} 
\begin{kframe}\begin{alltt}
\hlcom{##### DIAGRAM}

\hlkwd{par}\hldef{(}\hlkwc{mar} \hldef{=} \hlkwd{c}\hldef{(}\hlnum{1}\hldef{,} \hlnum{1}\hldef{,} \hlnum{1}\hldef{,} \hlnum{1}\hldef{))}
\hlkwd{openplotmat}\hldef{()}
\hldef{elpos} \hlkwb{<-} \hlkwd{coordinates}\hldef{(}\hlkwd{c}\hldef{(}\hlnum{1}\hldef{,} \hlnum{1}\hldef{,} \hlnum{2}\hldef{,} \hlnum{4}\hldef{))}
\hldef{fromto} \hlkwb{<-} \hlkwd{matrix}\hldef{(}\hlkwc{ncol} \hldef{=} \hlnum{2}\hldef{,} \hlkwc{byrow} \hldef{=} \hlnum{TRUE}\hldef{,} \hlkwc{data} \hldef{=} \hlkwd{c}\hldef{(}\hlnum{1}\hldef{,} \hlnum{2}\hldef{,} \hlnum{2}\hldef{,} \hlnum{3}\hldef{,}
    \hlnum{2}\hldef{,} \hlnum{4}\hldef{,} \hlnum{4}\hldef{,} \hlnum{7}\hldef{,} \hlnum{4}\hldef{,} \hlnum{8}\hldef{))}
\hldef{nr} \hlkwb{<-} \hlkwd{nrow}\hldef{(fromto)}
\hldef{arrpos} \hlkwb{<-} \hlkwd{matrix}\hldef{(}\hlkwc{ncol} \hldef{=} \hlnum{2}\hldef{,} \hlkwc{nrow} \hldef{= nr)}
\hlkwa{for} \hldef{(i} \hlkwa{in} \hlnum{1}\hlopt{:}\hldef{nr) arrpos[i, ]} \hlkwb{<-} \hlkwd{straightarrow}\hldef{(}\hlkwc{to} \hldef{= elpos[fromto[i,}
    \hlnum{2}\hldef{], ],} \hlkwc{from} \hldef{= elpos[fromto[i,} \hlnum{1}\hldef{], ],} \hlkwc{lwd} \hldef{=} \hlnum{2}\hldef{,} \hlkwc{arr.pos} \hldef{=} \hlnum{0.6}\hldef{,}
    \hlkwc{arr.length} \hldef{=} \hlnum{0.5}\hldef{)}
\hlkwd{textellipse}\hldef{(elpos[}\hlnum{1}\hldef{, ],} \hlnum{0.1}\hldef{,} \hlkwc{lab} \hldef{=} \hlsng{"start"}\hldef{,} \hlkwc{box.col} \hldef{=} \hlsng{"green"}\hldef{,}
    \hlkwc{shadow.col} \hldef{=} \hlsng{"darkgreen"}\hldef{,} \hlkwc{shadow.size} \hldef{=} \hlnum{0.005}\hldef{,} \hlkwc{cex} \hldef{=} \hlnum{1.5}\hldef{)}
\hlkwd{textrect}\hldef{(elpos[}\hlnum{2}\hldef{, ],} \hlnum{0.15}\hldef{,} \hlnum{0.05}\hldef{,} \hlkwc{lab} \hldef{=} \hlsng{"found term?"}\hldef{,} \hlkwc{box.col} \hldef{=} \hlsng{"blue"}\hldef{,}
    \hlkwc{shadow.col} \hldef{=} \hlsng{"darkblue"}\hldef{,} \hlkwc{shadow.size} \hldef{=} \hlnum{0.005}\hldef{,} \hlkwc{cex} \hldef{=} \hlnum{1.5}\hldef{)}
\hlkwd{textrect}\hldef{(elpos[}\hlnum{4}\hldef{, ],} \hlnum{0.15}\hldef{,} \hlnum{0.05}\hldef{,} \hlkwc{lab} \hldef{=} \hlsng{"related?"}\hldef{,} \hlkwc{box.col} \hldef{=} \hlsng{"blue"}\hldef{,}
    \hlkwc{shadow.col} \hldef{=} \hlsng{"darkblue"}\hldef{,} \hlkwc{shadow.size} \hldef{=} \hlnum{0.005}\hldef{,} \hlkwc{cex} \hldef{=} \hlnum{1.5}\hldef{)}
\hlkwd{textellipse}\hldef{(elpos[}\hlnum{3}\hldef{, ],} \hlnum{0.1}\hldef{,} \hlnum{0.1}\hldef{,} \hlkwc{lab} \hldef{=} \hlkwd{c}\hldef{(}\hlsng{"other"}\hldef{,} \hlsng{"term"}\hldef{),} \hlkwc{box.col} \hldef{=} \hlsng{"orange"}\hldef{,}
    \hlkwc{shadow.col} \hldef{=} \hlsng{"red"}\hldef{,} \hlkwc{shadow.size} \hldef{=} \hlnum{0.005}\hldef{,} \hlkwc{cex} \hldef{=} \hlnum{1.5}\hldef{)}
\hlkwd{textellipse}\hldef{(elpos[}\hlnum{3}\hldef{, ],} \hlnum{0.1}\hldef{,} \hlnum{0.1}\hldef{,} \hlkwc{lab} \hldef{=} \hlkwd{c}\hldef{(}\hlsng{"other"}\hldef{,} \hlsng{"term"}\hldef{),} \hlkwc{box.col} \hldef{=} \hlsng{"orange"}\hldef{,}
    \hlkwc{shadow.col} \hldef{=} \hlsng{"red"}\hldef{,} \hlkwc{shadow.size} \hldef{=} \hlnum{0.005}\hldef{,} \hlkwc{cex} \hldef{=} \hlnum{1.5}\hldef{)}
\hlkwd{textellipse}\hldef{(elpos[}\hlnum{7}\hldef{, ],} \hlnum{0.1}\hldef{,} \hlnum{0.1}\hldef{,} \hlkwc{lab} \hldef{=} \hlkwd{c}\hldef{(}\hlsng{"make"}\hldef{,} \hlsng{"a link"}\hldef{),}
    \hlkwc{box.col} \hldef{=} \hlsng{"orange"}\hldef{,} \hlkwc{shadow.col} \hldef{=} \hlsng{"red"}\hldef{,} \hlkwc{shadow.size} \hldef{=} \hlnum{0.005}\hldef{,}
    \hlkwc{cex} \hldef{=} \hlnum{1.5}\hldef{)}
\hlkwd{textellipse}\hldef{(elpos[}\hlnum{8}\hldef{, ],} \hlnum{0.1}\hldef{,} \hlnum{0.1}\hldef{,} \hlkwc{lab} \hldef{=} \hlkwd{c}\hldef{(}\hlsng{"new"}\hldef{,} \hlsng{"article"}\hldef{),}
    \hlkwc{box.col} \hldef{=} \hlsng{"orange"}\hldef{,} \hlkwc{shadow.col} \hldef{=} \hlsng{"red"}\hldef{,} \hlkwc{shadow.size} \hldef{=} \hlnum{0.005}\hldef{,}
    \hlkwc{cex} \hldef{=} \hlnum{1.5}\hldef{)}

\hldef{dd} \hlkwb{<-} \hlkwd{c}\hldef{(}\hlnum{0}\hldef{,} \hlnum{0.025}\hldef{)}
\hlkwd{text}\hldef{(arrpos[}\hlnum{2}\hldef{,} \hlnum{1}\hldef{]} \hlopt{+} \hlnum{0.05}\hldef{, arrpos[}\hlnum{2}\hldef{,} \hlnum{2}\hldef{],} \hlsng{"yes"}\hldef{)}
\hlkwd{text}\hldef{(arrpos[}\hlnum{3}\hldef{,} \hlnum{1}\hldef{]} \hlopt{-} \hlnum{0.05}\hldef{, arrpos[}\hlnum{3}\hldef{,} \hlnum{2}\hldef{],} \hlsng{"no"}\hldef{)}
\hlkwd{text}\hldef{(arrpos[}\hlnum{4}\hldef{,} \hlnum{1}\hldef{]} \hlopt{+} \hlnum{0.05}\hldef{, arrpos[}\hlnum{4}\hldef{,} \hlnum{2}\hldef{]} \hlopt{+} \hlnum{0.05}\hldef{,} \hlsng{"yes"}\hldef{)}
\hlkwd{text}\hldef{(arrpos[}\hlnum{5}\hldef{,} \hlnum{1}\hldef{]} \hlopt{-} \hlnum{0.05}\hldef{, arrpos[}\hlnum{5}\hldef{,} \hlnum{2}\hldef{]} \hlopt{+} \hlnum{0.05}\hldef{,} \hlsng{"no"}\hldef{)}
\end{alltt}
\end{kframe}
\includegraphics[width=\maxwidth]{figure/051-flowchart-demo-flowchart-2} 
\begin{kframe}\begin{alltt}
\hlcom{#####}
\hlkwd{par}\hldef{(}\hlkwc{mfrow} \hldef{=} \hlkwd{c}\hldef{(}\hlnum{2}\hldef{,} \hlnum{2}\hldef{))}
\hlkwd{par}\hldef{(}\hlkwc{mar} \hldef{=} \hlkwd{c}\hldef{(}\hlnum{0}\hldef{,} \hlnum{0}\hldef{,} \hlnum{0}\hldef{,} \hlnum{0}\hldef{))}
\hlkwd{openplotmat}\hldef{()}
\hldef{elpos} \hlkwb{<-} \hlkwd{coordinates}\hldef{(}\hlkwd{c}\hldef{(}\hlnum{2}\hldef{,} \hlnum{3}\hldef{))}
\hlkwd{treearrow}\hldef{(}\hlkwc{from} \hldef{= elpos[}\hlnum{1}\hlopt{:}\hlnum{2}\hldef{, ],} \hlkwc{to} \hldef{= elpos[}\hlnum{3}\hlopt{:}\hlnum{5}\hldef{, ],} \hlkwc{arr.side} \hldef{=} \hlnum{2}\hldef{,}
    \hlkwc{path} \hldef{=} \hlsng{"H"}\hldef{)}
\hlkwa{for} \hldef{(i} \hlkwa{in} \hlnum{1}\hlopt{:}\hlnum{5}\hldef{)} \hlkwd{textrect}\hldef{(elpos[i, ],} \hlnum{0.15}\hldef{,} \hlnum{0.05}\hldef{,} \hlkwc{lab} \hldef{= i,} \hlkwc{cex} \hldef{=} \hlnum{1.5}\hldef{)}

\hlkwd{openplotmat}\hldef{()}
\hldef{elpos} \hlkwb{<-} \hlkwd{coordinates}\hldef{(}\hlkwd{c}\hldef{(}\hlnum{3}\hldef{,} \hlnum{2}\hldef{),} \hlkwc{hor} \hldef{=} \hlnum{FALSE}\hldef{)}
\hlkwd{treearrow}\hldef{(}\hlkwc{from} \hldef{= elpos[}\hlnum{1}\hlopt{:}\hlnum{3}\hldef{, ],} \hlkwc{to} \hldef{= elpos[}\hlnum{4}\hlopt{:}\hlnum{5}\hldef{, ],} \hlkwc{arr.side} \hldef{=} \hlnum{2}\hldef{,}
    \hlkwc{arr.pos} \hldef{=} \hlnum{0.2}\hldef{,} \hlkwc{path} \hldef{=} \hlsng{"V"}\hldef{)}
\hlkwa{for} \hldef{(i} \hlkwa{in} \hlnum{1}\hlopt{:}\hlnum{5}\hldef{)} \hlkwd{textrect}\hldef{(elpos[i, ],} \hlnum{0.15}\hldef{,} \hlnum{0.05}\hldef{,} \hlkwc{lab} \hldef{= i,} \hlkwc{cex} \hldef{=} \hlnum{1.5}\hldef{)}

\hlkwd{openplotmat}\hldef{()}
\hldef{elpos} \hlkwb{<-} \hlkwd{coordinates}\hldef{(}\hlkwd{c}\hldef{(}\hlnum{1}\hldef{,} \hlnum{4}\hldef{))}
\hlkwd{treearrow}\hldef{(}\hlkwc{from} \hldef{= elpos[}\hlnum{1}\hldef{, ],} \hlkwc{to} \hldef{= elpos[}\hlnum{2}\hlopt{:}\hlnum{5}\hldef{, ],} \hlkwc{arr.side} \hldef{=} \hlnum{2}\hldef{,}
    \hlkwc{arr.pos} \hldef{=} \hlnum{0.7}\hldef{,} \hlkwc{path} \hldef{=} \hlsng{"H"}\hldef{)}
\hlkwa{for} \hldef{(i} \hlkwa{in} \hlnum{1}\hlopt{:}\hlnum{5}\hldef{)} \hlkwd{textrect}\hldef{(elpos[i, ],} \hlnum{0.05}\hldef{,} \hlnum{0.05}\hldef{,} \hlkwc{lab} \hldef{= i,} \hlkwc{cex} \hldef{=} \hlnum{1.5}\hldef{)}

\hlkwd{openplotmat}\hldef{()}
\hldef{elpos} \hlkwb{<-} \hlkwd{coordinates}\hldef{(}\hlkwd{c}\hldef{(}\hlnum{2}\hldef{,} \hlnum{1}\hldef{,} \hlnum{2}\hldef{,} \hlnum{3}\hldef{))}
\hldef{elpos[}\hlnum{1}\hldef{,} \hlnum{1}\hldef{]} \hlkwb{<-} \hlnum{0.3}
\hldef{elpos[}\hlnum{2}\hldef{,} \hlnum{1}\hldef{]} \hlkwb{<-} \hlnum{0.7}
\hlkwd{treearrow}\hldef{(}\hlkwc{from} \hldef{= elpos[}\hlnum{1}\hlopt{:}\hlnum{3}\hldef{, ],} \hlkwc{to} \hldef{= elpos[}\hlnum{4}\hlopt{:}\hlnum{8}\hldef{, ],} \hlkwc{arr.side} \hldef{=} \hlnum{2}\hldef{,}
    \hlkwc{path} \hldef{=} \hlsng{"H"}\hldef{)}
\hlkwa{for} \hldef{(i} \hlkwa{in} \hlnum{1}\hlopt{:}\hlnum{8}\hldef{)} \hlkwd{bentarrow}\hldef{(}\hlkwc{from} \hldef{= elpos[i, ],} \hlkwc{to} \hldef{= elpos[i, ]} \hlopt{+}
    \hlkwd{c}\hldef{(}\hlnum{0.1}\hldef{,} \hlopt{-}\hlnum{0.05}\hldef{),} \hlkwc{arr.pos} \hldef{=} \hlnum{1}\hldef{,} \hlkwc{arr.type} \hldef{=} \hlsng{"circle"}\hldef{,} \hlkwc{arr.col} \hldef{=} \hlsng{"white"}\hldef{,}
    \hlkwc{arr.length} \hldef{=} \hlnum{0.2}\hldef{)}
\hlkwa{for} \hldef{(i} \hlkwa{in} \hlnum{1}\hlopt{:}\hlnum{8}\hldef{)} \hlkwd{textrect}\hldef{(elpos[i, ],} \hlnum{0.05}\hldef{,} \hlnum{0.05}\hldef{,} \hlkwc{lab} \hldef{= i,} \hlkwc{cex} \hldef{=} \hlnum{1.5}\hldef{)}
\hlkwd{mtext}\hldef{(}\hlkwc{side} \hldef{=} \hlnum{3}\hldef{,} \hlkwc{outer} \hldef{=} \hlnum{TRUE}\hldef{,} \hlkwc{line} \hldef{=} \hlopt{-}\hlnum{2}\hldef{,} \hlsng{"treearrow"}\hldef{,} \hlkwc{cex} \hldef{=} \hlnum{1.5}\hldef{)}
\end{alltt}
\end{kframe}
\includegraphics[width=\maxwidth]{figure/051-flowchart-demo-flowchart-3} 
\begin{kframe}\begin{alltt}
\hlkwd{par}\hldef{(}\hlkwc{mfrow} \hldef{=} \hlkwd{c}\hldef{(}\hlnum{1}\hldef{,} \hlnum{1}\hldef{))}

\hlkwd{par}\hldef{(}\hlkwc{mar} \hldef{=} \hlkwd{c}\hldef{(}\hlnum{0}\hldef{,} \hlnum{0}\hldef{,} \hlnum{0}\hldef{,} \hlnum{0}\hldef{))}
\hlkwd{openplotmat}\hldef{()}
\hldef{elpos} \hlkwb{<-} \hlkwd{coordinates}\hldef{(}\hlkwd{c}\hldef{(}\hlnum{1}\hldef{,} \hlnum{1}\hldef{,} \hlnum{2}\hldef{,} \hlnum{1}\hldef{))}
\hlkwd{straightarrow}\hldef{(}\hlkwc{to} \hldef{= elpos[}\hlnum{2}\hldef{, ],} \hlkwc{from} \hldef{= elpos[}\hlnum{1}\hldef{, ])}
\hlkwd{treearrow}\hldef{(}\hlkwc{from} \hldef{= elpos[}\hlnum{2}\hldef{, ],} \hlkwc{to} \hldef{= elpos[}\hlnum{3}\hlopt{:}\hlnum{4}\hldef{, ],} \hlkwc{arr.side} \hldef{=} \hlnum{2}\hldef{,}
    \hlkwc{path} \hldef{=} \hlsng{"H"}\hldef{)}
\hlkwd{treearrow}\hldef{(}\hlkwc{from} \hldef{= elpos[}\hlnum{3}\hlopt{:}\hlnum{4}\hldef{, ],} \hlkwc{to} \hldef{= elpos[}\hlnum{5}\hldef{, ],} \hlkwc{arr.side} \hldef{=} \hlnum{2}\hldef{,}
    \hlkwc{path} \hldef{=} \hlsng{"H"}\hldef{)}
\hlkwd{segmentarrow}\hldef{(}\hlkwc{from} \hldef{= elpos[}\hlnum{5}\hldef{, ],} \hlkwc{to} \hldef{= elpos[}\hlnum{2}\hldef{, ],} \hlkwc{dd} \hldef{=} \hlnum{0.4}\hldef{)}
\hlkwd{curvedarrow}\hldef{(}\hlkwc{from} \hldef{= elpos[}\hlnum{5}\hldef{, ],} \hlkwc{to} \hldef{= elpos[}\hlnum{2}\hldef{, ],} \hlkwc{curve} \hldef{=} \hlnum{0.8}\hldef{)}
\hldef{col} \hlkwb{<-} \hlkwd{femmecol}\hldef{(}\hlnum{5}\hldef{)}
\hlkwd{texthexa}\hldef{(}\hlkwc{mid} \hldef{= elpos[}\hlnum{1}\hldef{, ],} \hlkwc{radx} \hldef{=} \hlnum{0.1}\hldef{,} \hlkwc{angle} \hldef{=} \hlnum{20}\hldef{,} \hlkwc{shadow.size} \hldef{=} \hlnum{0.01}\hldef{,}
    \hlkwc{rady} \hldef{=} \hlnum{0.05}\hldef{,} \hlkwc{lab} \hldef{=} \hlnum{1}\hldef{,} \hlkwc{box.col} \hldef{= col[}\hlnum{1}\hldef{])}
\hlkwd{textrect}\hldef{(}\hlkwc{mid} \hldef{= elpos[}\hlnum{2}\hldef{, ],} \hlkwc{radx} \hldef{=} \hlnum{0.1}\hldef{,} \hlkwc{shadow.size} \hldef{=} \hlnum{0.01}\hldef{,} \hlkwc{rady} \hldef{=} \hlnum{0.05}\hldef{,}
    \hlkwc{lab} \hldef{=} \hlnum{2}\hldef{,} \hlkwc{box.col} \hldef{= col[}\hlnum{2}\hldef{])}
\hlkwd{textround}\hldef{(}\hlkwc{mid} \hldef{= elpos[}\hlnum{3}\hldef{, ],} \hlkwc{radx} \hldef{=} \hlnum{0.05}\hldef{,} \hlkwc{shadow.size} \hldef{=} \hlnum{0.01}\hldef{,}
    \hlkwc{rady} \hldef{=} \hlnum{0.05}\hldef{,} \hlkwc{lab} \hldef{=} \hlnum{3}\hldef{,} \hlkwc{box.col} \hldef{= col[}\hlnum{3}\hldef{])}
\hlkwd{textellipse}\hldef{(}\hlkwc{mid} \hldef{= elpos[}\hlnum{4}\hldef{, ],} \hlkwc{radx} \hldef{=} \hlnum{0.05}\hldef{,} \hlkwc{shadow.size} \hldef{=} \hlnum{0.01}\hldef{,}
    \hlkwc{rady} \hldef{=} \hlnum{0.05}\hldef{,} \hlkwc{lab} \hldef{=} \hlnum{4}\hldef{,} \hlkwc{box.col} \hldef{= col[}\hlnum{4}\hldef{])}
\hlkwd{textellipse}\hldef{(}\hlkwc{mid} \hldef{= elpos[}\hlnum{5}\hldef{, ],} \hlkwc{radx} \hldef{=} \hlnum{0.05}\hldef{,} \hlkwc{shadow.size} \hldef{=} \hlnum{0.01}\hldef{,}
    \hlkwc{rady} \hldef{=} \hlnum{0.08}\hldef{,} \hlkwc{angle} \hldef{=} \hlnum{45}\hldef{,} \hlkwc{lab} \hldef{=} \hlnum{5}\hldef{,} \hlkwc{box.col} \hldef{= col[}\hlnum{5}\hldef{])}
\end{alltt}
\end{kframe}
\includegraphics[width=\maxwidth]{figure/051-flowchart-demo-flowchart-4} 
\begin{kframe}\begin{alltt}
\hlkwd{par}\hldef{(}\hlkwc{mar} \hldef{=} \hlkwd{c}\hldef{(}\hlnum{1}\hldef{,} \hlnum{1}\hldef{,} \hlnum{1}\hldef{,} \hlnum{1}\hldef{))}
\hlkwd{openplotmat}\hldef{(}\hlkwc{main} \hldef{=} \hlsng{"Arrowtypes"}\hldef{)}
\hldef{elpos} \hlkwb{<-} \hlkwd{coordinates}\hldef{(}\hlkwd{c}\hldef{(}\hlnum{1}\hldef{,} \hlnum{2}\hldef{,} \hlnum{1}\hldef{),} \hlkwc{mx} \hldef{=} \hlnum{0.1}\hldef{,} \hlkwc{my} \hldef{=} \hlopt{-}\hlnum{0.1}\hldef{)}
\hlkwd{curvedarrow}\hldef{(}\hlkwc{from} \hldef{= elpos[}\hlnum{1}\hldef{, ],} \hlkwc{to} \hldef{= elpos[}\hlnum{2}\hldef{, ],} \hlkwc{curve} \hldef{=} \hlopt{-}\hlnum{0.5}\hldef{,}
    \hlkwc{lty} \hldef{=} \hlnum{2}\hldef{,} \hlkwc{lcol} \hldef{=} \hlnum{2}\hldef{)}
\hlkwd{straightarrow}\hldef{(}\hlkwc{from} \hldef{= elpos[}\hlnum{1}\hldef{, ],} \hlkwc{to} \hldef{= elpos[}\hlnum{2}\hldef{, ],} \hlkwc{lty} \hldef{=} \hlnum{3}\hldef{,} \hlkwc{lcol} \hldef{=} \hlnum{3}\hldef{)}
\hlkwd{segmentarrow}\hldef{(}\hlkwc{from} \hldef{= elpos[}\hlnum{1}\hldef{, ],} \hlkwc{to} \hldef{= elpos[}\hlnum{2}\hldef{, ],} \hlkwc{lty} \hldef{=} \hlnum{1}\hldef{,} \hlkwc{lcol} \hldef{=} \hlnum{1}\hldef{)}
\hlkwd{treearrow}\hldef{(}\hlkwc{from} \hldef{= elpos[}\hlnum{2}\hlopt{:}\hlnum{3}\hldef{, ],} \hlkwc{to} \hldef{= elpos[}\hlnum{4}\hldef{, ],} \hlkwc{lty} \hldef{=} \hlnum{4}\hldef{,} \hlkwc{lcol} \hldef{=} \hlnum{4}\hldef{)}
\hlkwd{bentarrow}\hldef{(}\hlkwc{from} \hldef{= elpos[}\hlnum{3}\hldef{, ],} \hlkwc{to} \hldef{= elpos[}\hlnum{3}\hldef{, ]} \hlopt{-} \hlkwd{c}\hldef{(}\hlnum{0.1}\hldef{,} \hlnum{0.1}\hldef{),} \hlkwc{arr.pos} \hldef{=} \hlnum{1}\hldef{,}
    \hlkwc{lty} \hldef{=} \hlnum{5}\hldef{,} \hlkwc{lcol} \hldef{=} \hlnum{5}\hldef{)}
\hlkwd{bentarrow}\hldef{(}\hlkwc{from} \hldef{= elpos[}\hlnum{1}\hldef{, ],} \hlkwc{to} \hldef{= elpos[}\hlnum{3}\hldef{, ],} \hlkwc{lty} \hldef{=} \hlnum{5}\hldef{,} \hlkwc{lcol} \hldef{=} \hlnum{5}\hldef{)}
\hlkwd{selfarrow}\hldef{(}\hlkwc{pos} \hldef{= elpos[}\hlnum{3}\hldef{, ],} \hlkwc{path} \hldef{=} \hlsng{"R"}\hldef{,} \hlkwc{lty} \hldef{=} \hlnum{6}\hldef{,} \hlkwc{curve} \hldef{=} \hlnum{0.075}\hldef{,}
    \hlkwc{lcol} \hldef{=} \hlnum{6}\hldef{)}
\hlkwd{splitarrow}\hldef{(}\hlkwc{from} \hldef{= elpos[}\hlnum{1}\hldef{, ],} \hlkwc{to} \hldef{= elpos[}\hlnum{2}\hlopt{:}\hlnum{3}\hldef{, ],} \hlkwc{lty} \hldef{=} \hlnum{1}\hldef{,} \hlkwc{lwd} \hldef{=} \hlnum{1}\hldef{,}
    \hlkwc{dd} \hldef{=} \hlnum{0.7}\hldef{,} \hlkwc{arr.side} \hldef{=} \hlnum{1}\hlopt{:}\hlnum{2}\hldef{,} \hlkwc{lcol} \hldef{=} \hlnum{7}\hldef{)}

\hlkwa{for} \hldef{(i} \hlkwa{in} \hlnum{1}\hlopt{:}\hlnum{4}\hldef{)} \hlkwd{textrect}\hldef{(elpos[i, ],} \hlnum{0.05}\hldef{,} \hlnum{0.05}\hldef{,} \hlkwc{lab} \hldef{= i,} \hlkwc{cex} \hldef{=} \hlnum{1.5}\hldef{)}

\hlkwd{legend}\hldef{(}\hlsng{"topright"}\hldef{,} \hlkwc{lty} \hldef{=} \hlnum{1}\hlopt{:}\hlnum{7}\hldef{,} \hlkwc{legend} \hldef{=} \hlkwd{c}\hldef{(}\hlsng{"segmentarrow"}\hldef{,} \hlsng{"curvedarrow"}\hldef{,}
    \hlsng{"straightarrow"}\hldef{,} \hlsng{"treearrow"}\hldef{,} \hlsng{"bentarrow"}\hldef{,} \hlsng{"selfarrow"}\hldef{,} \hlsng{"splitarrow"}\hldef{),}
    \hlkwc{lwd} \hldef{=} \hlkwd{c}\hldef{(}\hlkwd{rep}\hldef{(}\hlnum{2}\hldef{,} \hlnum{6}\hldef{),} \hlnum{1}\hldef{),} \hlkwc{col} \hldef{=} \hlnum{1}\hlopt{:}\hlnum{7}\hldef{)}
\end{alltt}
\end{kframe}
\includegraphics[width=\maxwidth]{figure/051-flowchart-demo-flowchart-5} 
\begin{kframe}\begin{alltt}
\hlkwd{openplotmat}\hldef{(}\hlkwc{main} \hldef{=} \hlsng{"textbox shapes"}\hldef{)}
\hldef{rx} \hlkwb{<-} \hlnum{0.1}
\hldef{ry} \hlkwb{<-} \hlnum{0.05}
\hldef{pos} \hlkwb{<-} \hlkwd{coordinates}\hldef{(}\hlkwd{c}\hldef{(}\hlnum{1}\hldef{,} \hlnum{1}\hldef{,} \hlnum{1}\hldef{,} \hlnum{1}\hldef{,} \hlnum{1}\hldef{,} \hlnum{1}\hldef{,} \hlnum{1}\hldef{),} \hlkwc{mx} \hldef{=} \hlopt{-}\hlnum{0.2}\hldef{)}
\hlkwd{textdiamond}\hldef{(}\hlkwc{mid} \hldef{= pos[}\hlnum{1}\hldef{, ],} \hlkwc{radx} \hldef{= rx,} \hlkwc{rady} \hldef{= ry,} \hlkwc{lab} \hldef{= LETTERS[}\hlnum{1}\hldef{],}
    \hlkwc{cex} \hldef{=} \hlnum{2}\hldef{,} \hlkwc{shadow.col} \hldef{=} \hlsng{"lightblue"}\hldef{)}
\hlkwd{textellipse}\hldef{(}\hlkwc{mid} \hldef{= pos[}\hlnum{2}\hldef{, ],} \hlkwc{radx} \hldef{= rx,} \hlkwc{rady} \hldef{= ry,} \hlkwc{lab} \hldef{= LETTERS[}\hlnum{2}\hldef{],}
    \hlkwc{cex} \hldef{=} \hlnum{2}\hldef{,} \hlkwc{shadow.col} \hldef{=} \hlsng{"blue"}\hldef{)}
\hlkwd{texthexa}\hldef{(}\hlkwc{mid} \hldef{= pos[}\hlnum{3}\hldef{, ],} \hlkwc{radx} \hldef{= rx,} \hlkwc{rady} \hldef{= ry,} \hlkwc{lab} \hldef{= LETTERS[}\hlnum{3}\hldef{],}
    \hlkwc{cex} \hldef{=} \hlnum{2}\hldef{,} \hlkwc{shadow.col} \hldef{=} \hlsng{"darkblue"}\hldef{)}
\hlkwd{textmulti}\hldef{(}\hlkwc{mid} \hldef{= pos[}\hlnum{4}\hldef{, ],} \hlkwc{nr} \hldef{=} \hlnum{7}\hldef{,} \hlkwc{radx} \hldef{= rx,} \hlkwc{rady} \hldef{= ry,} \hlkwc{lab} \hldef{= LETTERS[}\hlnum{4}\hldef{],}
    \hlkwc{cex} \hldef{=} \hlnum{2}\hldef{,} \hlkwc{shadow.col} \hldef{=} \hlsng{"red"}\hldef{)}
\hlkwd{textrect}\hldef{(}\hlkwc{mid} \hldef{= pos[}\hlnum{5}\hldef{, ],} \hlkwc{radx} \hldef{= rx,} \hlkwc{rady} \hldef{= ry,} \hlkwc{lab} \hldef{= LETTERS[}\hlnum{5}\hldef{],}
    \hlkwc{cex} \hldef{=} \hlnum{2}\hldef{,} \hlkwc{shadow.col} \hldef{=} \hlsng{"darkred"}\hldef{)}
\hlkwd{textround}\hldef{(}\hlkwc{mid} \hldef{= pos[}\hlnum{6}\hldef{, ],} \hlkwc{radx} \hldef{= rx,} \hlkwc{rady} \hldef{= ry,} \hlkwc{lab} \hldef{= LETTERS[}\hlnum{6}\hldef{],}
    \hlkwc{cex} \hldef{=} \hlnum{2}\hldef{,} \hlkwc{shadow.col} \hldef{=} \hlsng{"black"}\hldef{)}
\hlkwd{textempty}\hldef{(}\hlkwc{mid} \hldef{= pos[}\hlnum{7}\hldef{, ],} \hlkwc{lab} \hldef{= LETTERS[}\hlnum{7}\hldef{],} \hlkwc{cex} \hldef{=} \hlnum{2}\hldef{,} \hlkwc{box.col} \hldef{=} \hlsng{"yellow"}\hldef{)}
\hldef{pos[,} \hlnum{1}\hldef{]} \hlkwb{<-} \hldef{pos[,} \hlnum{1}\hldef{]} \hlopt{+} \hlnum{0.5}
\hlkwd{text}\hldef{(pos[,} \hlnum{1}\hldef{], pos[,} \hlnum{2}\hldef{],} \hlkwd{c}\hldef{(}\hlsng{"textdiamond"}\hldef{,} \hlsng{"textellipse"}\hldef{,} \hlsng{"texthexa"}\hldef{,}
    \hlsng{"textmulti"}\hldef{,} \hlsng{"textrect"}\hldef{,} \hlsng{"textround"}\hldef{,} \hlsng{"textempty"}\hldef{))}
\end{alltt}
\end{kframe}
\includegraphics[width=\maxwidth]{figure/051-flowchart-demo-flowchart-6} 
\begin{kframe}\begin{alltt}
\hldef{mf} \hlkwb{<-} \hlkwd{par}\hldef{(}\hlkwc{mfrow} \hldef{=} \hlkwd{c}\hldef{(}\hlnum{2}\hldef{,} \hlnum{2}\hldef{))}
\hlkwd{example}\hldef{(bentarrow)}
\end{alltt}
\begin{verbatim}
## 
## bntrrw> openplotmat(main = "bentarrow")
## 
## bntrrw> pos <- cbind( A <- seq(0.1, 0.9, by = 0.2), rev(A))
## 
## bntrrw> text(pos, LETTERS[1:5], cex = 2)
## 
## bntrrw> for (i in 1:4) 
## bntrrw+   bentarrow(from = pos[i,] + c(0.05, 0), to = pos[i+1,] + c(0, 0.05),
## bntrrw+             arr.pos = 1, arr.adj = 1)
## 
## bntrrw> for (i in 1:2) 
## bntrrw+   bentarrow(from = pos[i,] + c(0.05, 0), to = pos[i+1, ] + c(0, 0.05),
## bntrrw+             arr.pos = 0.5, path = "V", lcol = "lightblue", 
## bntrrw+             arr.type = "triangle")
## 
## bntrrw> bentarrow(from = pos[3, ] + c(0.05, 0), to = pos[4, ] + c(0, 0.05),
## bntrrw+           arr.pos = 0.7, arr.side = 1, path = "V", lcol = "darkblue")
## 
## bntrrw> bentarrow(from = pos[4, ] + c(0.05, 0), to = pos[5, ] + c(0, 0.05),
## bntrrw+           arr.pos = 0.7, arr.side = 1:2, path = "V", lcol = "blue")
\end{verbatim}
\begin{alltt}
\hlkwd{example}\hldef{(coordinates)}
\end{alltt}
\begin{verbatim}
## 
## crdnts> openplotmat(main = "coordinates")
## 
## crdnts> text(coordinates(N = 6), lab = LETTERS[1:6], cex = 2)
## 
## crdnts> text(coordinates(N = 8, relsize = 0.5), lab = letters[1:8], cex = 2)
## 
## crdnts> openplotmat(main = "coordinates")
## 
## crdnts> text(coordinates(pos = c(2, 4, 2)), lab = letters[1:8], cex = 2)
## 
## crdnts> plot(0, type = "n", xlim = c(0, 5), ylim = c(2, 8), main = "coordinates")
\end{verbatim}
\end{kframe}
\includegraphics[width=\maxwidth]{figure/051-flowchart-demo-flowchart-7} 
\begin{kframe}\begin{verbatim}
## 
## crdnts> text(coordinates(pos = c(2, 4, 3), hor = FALSE), lab = 1:9, cex = 2)
\end{verbatim}
\begin{alltt}
\hlkwd{par}\hldef{(}\hlkwc{mfrow} \hldef{=} \hlkwd{c}\hldef{(}\hlnum{2}\hldef{,} \hlnum{2}\hldef{))}
\hlkwd{example}\hldef{(curvedarrow)}
\end{alltt}
\begin{verbatim}
## 
## crvdrr> openplotmat(main = "curvedarrow")
## 
## crvdrr> pos <- coordinates(pos = 4, my = 0.2)
## 
## crvdrr> text(pos, LETTERS[1:4], cex = 2)
## 
## crvdrr> for (i in 1:3) 
## crvdrr+   curvedarrow(from = pos[1, ] + c(0,-0.05), to = pos[i+1, ] + c(0,-0.05),
## crvdrr+               curve = 0.5, arr.pos = 1)
## 
## crvdrr> for (i in 1:3) 
## crvdrr+   curvedarrow(from = pos[1, ] + c(0, 0.05), to = pos[i+1, ] + c(0, 0.05),
## crvdrr+               curve = -0.25, arr.adj = 1, arr.pos = 0.5, 
## crvdrr+               arr.type = "triangle", arr.col = "blue")
\end{verbatim}
\begin{alltt}
\hlkwd{example}\hldef{(segmentarrow)}
\end{alltt}
\begin{verbatim}
## 
## sgmntr> openplotmat(main="segmentarrow")
## 
## sgmntr> pos <-cbind(A <- seq(0.2, 0.8, by = 0.2), rev(A))
## 
## sgmntr> text(pos, LETTERS[1:4], cex = 2)
## 
## sgmntr> segmentarrow(from = pos[1, ] + c(0, 0.05), to = pos[2, ] + c(0, 0.05),
## sgmntr+              arr.pos = 1, arr.adj = 1, dd = 0.1, 
## sgmntr+              path = "UHD", lcol = "darkred")
## 
## sgmntr> segmentarrow(from = pos[2, ] + c(-0.05, 0), to = pos[3, ] + c(-0.05, 0.01),
## sgmntr+              arr.pos = 1, arr.adj = 1, dd = 0.1,
## sgmntr+              lcol = "black", arr.type = "triangle")
## 
## sgmntr> segmentarrow(from = pos[2, ] + c(0.05, 0), to = pos[3, ] + c(0.05, 0.01),
## sgmntr+              arr.pos = 0.5, dd = 0.3, path = "RVL", arr.side = 1,
## sgmntr+              lcol = "lightblue", arr.type = "simple")  
## 
## sgmntr> segmentarrow(from = pos[3, ] + c(0.05, 0), to = pos[4, ] + c(-0.05, 0.01),
## sgmntr+              arr.pos = 0.5, dd = 0.05, path = "RVL", lcol = "darkblue",
## sgmntr+              arr.type = "ellipse")  
## 
## sgmntr> segmentarrow(from = pos[3, ] + c(0, -0.05), to = pos[4, ] + c(0, 0.05),
## sgmntr+              arr.pos = 0.5, arr.side = 3, dd = 0.05, path = "DHU",
## sgmntr+              lcol = "darkgreen")  
## 
## sgmntr> segmentarrow(from = pos[3,] + c(-0.05, -0.05), to = pos[4, ] + c(0, -0.05),
## sgmntr+              arr.pos = 0.5, arr.side = 1:3, dd = 0.3, path = "DHU",
## sgmntr+              lcol = "green")
\end{verbatim}
\begin{alltt}
\hlkwd{example}\hldef{(selfarrow)}
\end{alltt}
\begin{verbatim}
## 
## slfrrw> openplotmat(main = "selfarrow")
## 
## slfrrw> pos <- coordinates(3, mx = 0.05)
## 
## slfrrw> text(pos, LETTERS[1:3], cex = 2)
## 
## slfrrw> for (i in 1:3) 
## slfrrw+   selfarrow(pos = pos[i, ], path = "R", arr.pos = 0.2,
## slfrrw+             curve = c(0.05, 0.1), lcol = "darkred")
## 
## slfrrw> for (i in 1:3) 
## slfrrw+   selfarrow(pos = pos[i, ], path = "L", arr.pos = 0.7,
## slfrrw+             lcol = "darkblue", curve = c(0.05, 0.05))
## 
## slfrrw> for (i in 1:3) 
## slfrrw+   selfarrow(pos = pos[i, ], path = "L", arr.pos = 0.5,
## slfrrw+             lcol = "darkgreen", code = i, arr.type = "triangle")
\end{verbatim}
\begin{alltt}
\hlkwd{example}\hldef{(straightarrow)}
\end{alltt}
\begin{verbatim}
## 
## strght> openplotmat(main = "straightarrow")
\end{verbatim}
\end{kframe}
\includegraphics[width=\maxwidth]{figure/051-flowchart-demo-flowchart-8} 
\begin{kframe}\begin{verbatim}
## 
## strght> pos <- coordinates(c(2, 3, 1))
## 
## strght> for (i in 1:5) 
## strght+   straightarrow(from = pos[i, ], to = pos[i+1, ], arr.pos = 0.5)
## 
## strght> straightarrow(from = pos[6, ], to = pos[6, ] + c(0.3, 0.), 
## strght+               arr.type = "T", arr.pos = 1, arr.lwd = 3)    
## 
## strght> for (i in 1:6) 
## strght+   textrect(pos[i, ], lab = LETTERS[i], radx = 0.05)
\end{verbatim}
\begin{alltt}
\hlkwd{par}\hldef{(}\hlkwc{mfrow} \hldef{=} \hlkwd{c}\hldef{(}\hlnum{2}\hldef{,} \hlnum{2}\hldef{))}
\hlkwd{example}\hldef{(treearrow)}
\end{alltt}
\begin{verbatim}
## 
## trerrw> openplotmat(main = "treearrow")
## 
## trerrw> pos <- coordinates(c(3, 2, 4, 1))
## 
## trerrw> treearrow(from = pos[1:5, ], to = pos[6:10, ])
## 
## trerrw> for (i in 1:10) 
## trerrw+   textrect(pos[i, ], lab = i, cex = 2, radx = 0.05)
## 
## trerrw> openplotmat(main = "treearrow")
## 
## trerrw> pos <- coordinates(c(2, 4), hor = FALSE)
## 
## trerrw> treearrow(from = pos[1:2, ], to = pos[3:6, ], 
## trerrw+           arr.side = 1:2, path = "V")
## 
## trerrw> for (i in 1:6) 
## trerrw+   textrect(pos[i, ], lab = i, cex = 2, radx = 0.05)
## 
## trerrw> openplotmat(main = "treearrow")
## 
## trerrw> pos <- coordinates(c(3, 5, 7, 7, 5, 3))
## 
## trerrw> treearrow(from = pos[1:15, ], to = pos[15:30, ], arr.side = 0)
## 
## trerrw> for (i in 1:30) 
## trerrw+   textrect(pos[i, ], lab = i, cex = 1.2, radx = 0.025)
\end{verbatim}
\begin{alltt}
\hlkwd{par}\hldef{(}\hlkwc{mfrow} \hldef{=} \hlkwd{c}\hldef{(}\hlnum{2}\hldef{,} \hlnum{2}\hldef{))}
\end{alltt}
\end{kframe}
\includegraphics[width=\maxwidth]{figure/051-flowchart-demo-flowchart-9} 
\begin{kframe}\begin{alltt}
\hlkwd{example}\hldef{(splitarrow)}
\end{alltt}
\begin{verbatim}
## 
## spltrr> openplotmat(main = "splitarrow")
## 
## spltrr> pos <- coordinates(c(1, 2, 2, 4, 1))
## 
## spltrr> splitarrow(from = pos[1, ], to = pos[2:10, ], 
## spltrr+            arr.side = 1, centre = c(0.5, 0.625))
## 
## spltrr> for (i in 1:10) 
## spltrr+   textrect(pos[i, ], lab = i, cex = 2, radx = 0.05)
## 
## spltrr> openplotmat(main = "splitarrow")
## 
## spltrr> pos <- coordinates(c(1, 3))
## 
## spltrr> splitarrow(from = pos[1,], to = pos[2:4, ], arr.side = 1)
## 
## spltrr> splitarrow(from = pos[1,], to = pos[2:4, ], arr.side = 2)
## 
## spltrr> for (i in 1:4) 
## spltrr+   textrect(pos[i, ], lab = i, cex = 2, radx = 0.05)
## 
## spltrr> openplotmat(main = "splitarrow")
## 
## spltrr> pos <- coordinates(N = 6)
## 
## spltrr> pos <- rbind(c(0.5, 0.5), pos)
## 
## spltrr> splitarrow(from = pos[1, ], to = pos[2:7, ], arr.side = 2)
## 
## spltrr> for (i in 1:7)
## spltrr+   textrect(pos[i, ], lab = i, cex = 2, radx = 0.05)
\end{verbatim}
\begin{alltt}
\hlkwd{par}\hldef{(}\hlkwc{mfrow} \hldef{=} \hlkwd{c}\hldef{(}\hlnum{2}\hldef{,} \hlnum{2}\hldef{))}
\end{alltt}
\end{kframe}
\includegraphics[width=\maxwidth]{figure/051-flowchart-demo-flowchart-10} 
\begin{kframe}\begin{alltt}
\hlkwd{example}\hldef{(textdiamond)}
\end{alltt}
\begin{verbatim}
## 
## txtdmn> openplotmat(xlim = c(-0.1, 1.1), main = "textdiamond")
## 
## txtdmn> for (i in 1:10) 
## txtdmn+   textdiamond(mid = runif(2), col = i, radx = 0.1, rady = 0.05,
## txtdmn+               lab = LETTERS[i], cex = 2, angle = runif(1)*360)
\end{verbatim}
\begin{alltt}
\hlkwd{example}\hldef{(textellipse)}
\end{alltt}
\begin{verbatim}
## 
## txtllp> openplotmat(xlim = c(-0.1, 1.1), main = "textellipse")
## 
## txtllp> for (i in 1:10) 
## txtllp+   textellipse(mid = runif(2), col = i, box.col = grey(0.95),
## txtllp+               radx = 0.1, rady = 0.05, lab = LETTERS[i],
## txtllp+               cex = 2, angle = runif(1)*360)
\end{verbatim}
\begin{alltt}
\hlkwd{example}\hldef{(textempty)}
\end{alltt}
\begin{verbatim}
## 
## txtmpt> openplotmat(xlim = c(-0.1, 1.1), col = "lightgrey", main = "textempty")
## 
## txtmpt> for (i in 1:10) 
## txtmpt+   textempty(mid = runif(2), box.col = i, lab = LETTERS[i], cex = 2)
## 
## txtmpt> textempty(mid = c(0.5, 0.5), adj = c(0, 0), 
## txtmpt+   lab = "textempty", box.col = "white")
\end{verbatim}
\begin{alltt}
\hlkwd{example}\hldef{(texthexa)}
\end{alltt}
\begin{verbatim}
## 
## texthx>   openplotmat(xlim = c(-0.1, 1.1), main = "texthexa")
\end{verbatim}
\end{kframe}
\includegraphics[width=\maxwidth]{figure/051-flowchart-demo-flowchart-11} 
\begin{kframe}\begin{verbatim}
## 
## texthx>   for (i in 1:20) 
## texthx+     texthexa(mid = runif(2), angle = runif(1)*360, col = i,
## texthx+              box.col = grey(0.95), radx = 0.1, rady = 0.05,
## texthx+              lab = LETTERS[i], cex = 2)
\end{verbatim}
\begin{alltt}
\hlkwd{example}\hldef{(textmulti)}
\end{alltt}
\begin{verbatim}
## 
## txtmlt>   openplotmat(xlim = c(-0.1, 1.1), main = "textmulti")
## 
## txtmlt>   for (i in 1:10) 
## txtmlt+     textmulti(mid = runif(2), col = i, radx = 0.1, rady = 0.1,
## txtmlt+              lab = LETTERS[i], cex = 2, nr = trunc(i/1.5)+3)
\end{verbatim}
\begin{alltt}
\hlkwd{example}\hldef{(textplain)}
\end{alltt}
\begin{verbatim}
## 
## txtpln>   openplotmat(main = "textplain")
## 
## txtpln>   textplain(mid = c(0.5, 0.5), 
## txtpln+             lab = c("this text is", "centered", "4 strings", "on 4 lines"))
## 
## txtpln>   textplain(mid = c(0.5, 0.2), adj = c(0, 0.5), font = 2, height = 0.05,
## txtpln+             lab = c("this text is","left alligned"))
## 
## txtpln>   textplain(mid = c(0.5, 0.8), adj = c(1, 0.5), font = 3, height = 0.05, 
## txtpln+             lab = c("this text is","right alligned"))
\end{verbatim}
\begin{alltt}
\hlkwd{example}\hldef{(textrect)}
\end{alltt}
\begin{verbatim}
## 
## txtrct>   openplotmat(xlim = c(-0.1, 1.1), main = "textrect")
## 
## txtrct>   for (i in 1:10) 
## txtrct+     textrect(mid = runif(2), col = i, radx = 0.1, rady = 0.1,
## txtrct+             lab = LETTERS[i], cex = 2)
## 
## txtrct>   openplotmat(xlim = c(-0.1, 1.1), main = "textparallel")
\end{verbatim}
\end{kframe}
\includegraphics[width=\maxwidth]{figure/051-flowchart-demo-flowchart-12} 
\begin{kframe}\begin{verbatim}
## 
## txtrct>   elpos <-coordinates (c(1, 1, 1, 1, 1))
## 
## txtrct>   textparallel(mid = elpos[1,], col = 1, radx = 0.2, rady = 0.1,
## txtrct+             lab = "theta=20", theta = 20)
## 
## txtrct>   textparallel(mid = elpos[2,], col = 1, radx = 0.2, rady = 0.1,
## txtrct+             lab = "theta=60", theta = 60)
## 
## txtrct>   textparallel(mid = elpos[3,], col = 1, radx = 0.2, rady = 0.1,
## txtrct+             lab = "theta=100", theta = 100)
## 
## txtrct>   textparallel(mid = elpos[4,], col = 1, radx = 0.2, rady = 0.1,
## txtrct+             lab = "theta=140", theta = 140)
## 
## txtrct>   textparallel(mid = elpos[5,], col = 1, radx = 0.2, rady = 0.1,
## txtrct+             lab = "theta=170", theta = 170)
\end{verbatim}
\begin{alltt}
\hlkwd{example}\hldef{(textround)}
\end{alltt}
\begin{verbatim}
## 
## txtrnd>   openplotmat(xlim = c(-0.1, 1.1), main = "textround")
## 
## txtrnd>   for (i in 1:10) 
## txtrnd+     textround(mid = runif(2), col = i, 
## txtrnd+               radx = 0.03, rady = 0.075,
## txtrnd+               lab = LETTERS[i], cex = 2)
\end{verbatim}
\begin{alltt}
\hlkwd{par}\hldef{(}\hlkwc{mfrow} \hldef{= mf)}
\end{alltt}
\end{kframe}
\includegraphics[width=\maxwidth]{figure/051-flowchart-demo-flowchart-13} 
\end{knitrout}
\end{document}
