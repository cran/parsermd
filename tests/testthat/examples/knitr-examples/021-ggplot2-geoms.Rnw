\documentclass[a4paper,titlepage]{tufte-handout}
\title{ggplot2 Gallery}
\begin{document}
\maketitle
\tableofcontents

<<setup, include=FALSE>>=
library(knitr)
# cache chunks and do not tidy ggplot2 examples code
opts_chunk$set(tidy = FALSE, cache = TRUE)
@

% the first 10 geoms in ggplot2
<<write-examples, include=FALSE>>=
library(ggplot2)
ex = lapply(head(apropos("^geom_"), 10), function(g) {
  p = utils:::index.search(g, find.package(), TRUE)
  tools::Rd2ex(utils:::.getHelpFile(p), f <- tempfile())
  c(sprintf("\\section{%s}\n\n<<%s>>=",
            knitr:::escape_latex(g), g),
    readLines(f), "@\n\n")
})
@

\Sexpr{knit_child(text = unlist(ex), quiet = TRUE)}

\end{document}
